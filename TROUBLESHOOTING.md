# 🔧 Troubleshooting Guide

## 안드로이드에서 예전 PWA가 표시되는 문제

### 문제 설명
안드로이드에서 이미지 공유 시 또는 페이지 접속 시 예전 버전의 PWA가 표시되는 경우가 있습니다.

### 원인
1. **브라우저 캐시**: Service Worker가 이전 버전의 파일을 캐시하고 있을 수 있습니다.
2. **Android 시스템 캐시**: Android 시스템이 PWA 매니페스트를 캐시하여 공유 시트에 오래된 정보를 표시할 수 있습니다.
3. **설치된 PWA**: 홈 화면에 설치된 PWA가 오래된 버전일 수 있습니다.

### 해결 방법

#### 방법 1: 브라우저 캐시 강제 새로고침
1. Chrome에서 페이지 열기
2. 주소창 옆의 메뉴(⋮) → 설정 → 개인정보 보호 및 보안
3. "인터넷 사용 기록 삭제" 선택
4. "캐시된 이미지 및 파일" 선택 후 삭제
5. 페이지를 다시 열기

#### 방법 2: Service Worker 직접 제거 (개발자용)
1. Chrome에서 페이지 열기
2. 개발자 도구 열기 (F12 또는 메뉴 → 도구 더보기 → 개발자 도구)
3. Application 탭 선택
4. 왼쪽에서 "Service Workers" 선택
5. "Unregister" 버튼 클릭
6. "Storage" → "Clear site data" 클릭
7. 페이지 새로고침

#### 방법 3: PWA 재설치
1. 홈 화면의 Image Composer 앱 길게 누르기
2. "제거" 또는 "삭제" 선택
3. Chrome에서 https://pevjant.github.io 접속
4. 메뉴(⋮) → "홈 화면에 추가" 또는 "앱 설치" 선택

#### 방법 4: 앱 데이터 삭제 (Android 설정)
1. Android 설정 → 앱
2. Chrome 또는 설치된 Image Composer 앱 찾기
3. "저장공간" → "데이터 삭제" 또는 "캐시 삭제"
4. 앱을 다시 실행

### 버전 확인
현재 페이지의 버전은 앱 헤더 우측 상단에 표시됩니다.
- **최신 버전**: v1.0.1

버전이 v1.0.1로 표시되면 최신 버전을 사용 중입니다.

### 자동 업데이트
이제 Service Worker는 자동으로 업데이트를 감지하고 적용합니다:
1. 페이지를 열면 자동으로 업데이트 확인
2. 새 버전 발견 시 자동으로 다운로드
3. 다음 페이지 로드 시 새 버전 적용

콘솔 로그를 확인하여 업데이트 상태를 모니터링할 수 있습니다.

## 공유 기능 문제

### Image Composer가 공유 시트에 표시되지 않는 경우
1. PWA가 올바르게 설치되었는지 확인
2. 홈 화면에 앱을 추가한 후 해당 앱에서 실행
3. Android의 기본 공유 시트가 업데이트되지 않은 경우 기기를 재시작

### 공유한 이미지가 로드되지 않는 경우
1. 개발자 도구의 콘솔에서 오류 확인
2. Service Worker가 제대로 동작하는지 확인
3. 캐시를 삭제하고 다시 시도

## 기술 정보

### Service Worker 캐시 전략
```
CACHE_NAME: 'image-composer-v1.0.1'
- /app.html
- /app.js
- /manifest.json
- /icon-*.png
```

### 캐시 업데이트 정책
- 새 버전 배포 시 `CACHE_NAME` 변경
- 이전 버전 캐시 자동 삭제
- `shared-files`와 `shared-data` 캐시는 유지

## 추가 도움이 필요한 경우

Issue를 생성해주세요: https://github.com/pevjant/pevjant.github.io/issues
